<?php	$grp_list = $sysConfig->loadGrp();	$mod_list = $sysConfig->loadMod();		$filter = strtolower($pr->post('cerca',''));	$out='<div class="panel orange" style="text-align:center;">			<table class="form" id="cerca_gruppo">			<tr>				<th>					<input type="hidden" name="Q" value="Grp_Load_Interface">					Nome Gruppo : 				</th>				<td> <input type="text" name="cerca" class="full" value="'.$filter.'" id="input_cerca_gruppo"> </td>				<td> <button class="orange" onclick="pi.request(\'cerca_gruppo\');"><i class="mdi mdi-magnify"></i> Cerca </button></td>				<th> <button class="orange" onclick="pi.request(null,\'Grp_Win_New\');"><i class="mdi mdi-library-plus"></i> Nuovo Gruppo </button> </th>			</tr>		</table>	</div>	<table class="lite orange">		<tr>			<th colspan="2">Id</th>			<th>Nome</th>			<th colspan="2">Descrizione / Moduli</th>		</tr>';	foreach($mod_list as $k => $v){		$v['id'] = $k;		$grp_mod_list[$v['grp']][]=$v;	}	foreach($grp_list as $k => $v){		if($filter != ''){			if(!(strpos(strtolower($k),$filter)!==false || strpos(strtolower($v['nome']),$filter)!==false)){ continue; }		}		$out.='<tr onclick="pi.request(\'Load_Dett_'.$k.'\');" style="cursor:pointer; height:30px;" class="orange">			<td colspan="2"> 				<div id="Load_Dett_'.$k.'">				<input type="hidden" name="Q" value="Grp_Win_Load_Dett">				<input type="hidden" name="ID" value="'.$k.'">				[ <b>'.$k.'</b> ] '.$v['nome'].'				</div>			</td>			<td>'.$v['des'].'</td>			<td> [ Moduli Registrati : <b>'.(!isset($grp_mod_list[$k]) ? ' --- ' : count($grp_mod_list[$k])).' </b>]</td>		</tr>';		if(isset($grp_mod_list[$k])){			foreach($grp_mod_list[$k] as $k1 => $v1){				switch($v1['stato']){				case 'ATT' : $des_stato = 'Attivo'; 			$class=''; 		    $style='';	break;				case 'DEV' : $des_stato = 'Sviluppo';  			$class='orange';	$style='';	break;				case 'PRIV': $des_stato = 'Privato';  			$class='purple';	$style='';	break;				case 'ERR' : $des_stato = 'Errori Bloccanti'; 	$class='red';		$style='';	break;				case 'DIS' : $des_stato = 'Disabilitato'; 		$class='';			$style='color:#888;';	break;			}			$out.='<tr style="cursor:pointer; '.$style.'" onclick="pi.request(\'Mod_Grp_Mod_'.$v1['id'].'\')">					<td style="text-align:right; width:30px;" >						<div id="Mod_Grp_Mod_'.$v1['id'].'">							<input type="hidden" name="Q" value="Grp_Win_Edit_Mod">							<input type="hidden" name="ID" value="'.$v1['id'].'">							<i class="mdi '.$v1['icon'].' '.$class.'" />						</div>					</td>					<td>[ '.$v1['id'].' ]</td>					<td>'.htmlentities($v1['nome']).'</td>					<td>'.htmlentities($v1['des']).'</td>				</tr>';			}		}	}	$out.='</table>';	$pr->addHtml('container',$out)->addScript('$("#input_cerca_gruppo").focus(); $("#input_cerca_gruppo").select(); shortcut("enter", onEnterGrp,{"propagate":false, target:"input_cerca_gruppo"} );')->response();?>